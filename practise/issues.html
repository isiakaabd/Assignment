<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>


    <h3> Update/ Add New User </h3>
    <input type="hidden" id="index">
    <p></p>
    <input type="text" id="fullName" placeholder="fullName">
    <p></p>
    <input type="text" id="email" placeholder="Email">
    <p></p>
    <input type="text" id="tel" placeholder="Phonenumber">
    <p></p>
    <input type="text" id="pics" placeholder="ProfilePics">
    <p></p>
    <button>Add</button>

    <button onclick="Update()">Update</button>
    <p></p>

    <div id="users">


    </div>
    <script>
        let i = 0;
        let usersNames = ["Maureen", "Aisha", "Chioma", "Shams", "Glory"]

        let users = JSON.parse(localStorage.getItem("InternalUsers"))

        //localStorage.setItem("InternalUsers",JSON.stringify(users))


        /*/// Saving to localStorage
                        localStorage.setItem("chatMessages",chatMessagesData)
                        localStorage.setItem("key",Data)
                        localStorage.setItem("users",userData) //

        // Geting saved element

               localStorage.getItem("key")

        //// Removing a key 

        localStorage.removeItem("key") // remove an item
        localStorage.clear()   // remove all
        */

        // Find 

        /*
        1. Array.find(element=>condtion)

        2. Array.find(function(){
             condition
         })

         3. Array.find(()=>{condition})

         4. Array.find(FunctioName)


        */


        findName = usersNames.find(x => x == "Shams")
        findNamePosition = usersNames.findIndex(x => x == "Shams")
            // alert(Object.keys(InternalUserObject))

        //alert(findNamePosition)

        // finding from array of objetcs 
        // Array.find(element=>element.key=="key to be found")
        findFullName = users.find(userObject => userObject.fullName == "Samuel")
        findPositionByFullName = users.findIndex(userObject => userObject.fullName == "Samuel")

        //alert(findPositionByFullName)
        // alert(JSON.stringify(findFullName))


        // findIndex  returns the position of an element in the array

        showUsers()

        function showUsers() {
            userCont = '';
            for (i = 0; i < users.length; i++) {

                userCont += `
            <div>
            <img src="${users[i].pics}" style="max-height:150px;">
            FullName : ${users[i].fullName} <br>
            Email    :  ${users[i].email} <br>
            Phone    :  ${users[i].tel} <br>


            <button onClick="Delete(${i})">Delete</button> 
            <button onClick="triggerEdit(${i})">Edit </button>
            <hr>


        </div>
            
            `

            }
            document.getElementById("users").innerHTML = userCont


        }

        function Delete(i) {
            if (confirm("Are you sure you want to delete this")) {
                users.splice(i, 1)
                localStorage.setItem("InternalUsers", JSON.stringify(users))
                showUsers()
            }
        }

        function Update() {
            i = document.getElementById("index").value

            let updatedRecord = {
                "fullName": document.getElementById("fullName").value,
                "email": document.getElementById("email").value,
                "tel": document.getElementById("tel").value,
                "pics": document.getElementById("pics").value

            }
            users[i] = updatedRecord
            localStorage.setItem("InternalUsers", JSON.stringify(users))
            showUsers()


        }

        function triggerEdit(i) {

            userRecord = users[i]
            document.getElementById("fullName").value = userRecord.fullName
            document.getElementById("email").value = userRecord.email
            document.getElementById("tel").value = userRecord.tel
            document.getElementById("pics").value = userRecord.pics
            document.getElementById("index").value = i



        }


        async function Update() {

        }

        await Update()
            ///
            //
            //
            //
    </script>

</body>

</html>